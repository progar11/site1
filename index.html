<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pro Tournament Arena</title>

<style>
:root {
    --bg: #05070a;
    --panel: rgba(13, 17, 23, 0.8);
    --accent: #00f2ff;
    --win: #00ff88;
    --lose: #ff4655;
    --text: #ffffff;
    --font: 'Rajdhani', sans-serif;
}

@import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&display=swap');

body {
    margin: 0;
    font-family: var(--font);
    background: var(--bg);
    background-image: 
        radial-gradient(circle at 20% 30%, rgba(0, 242, 255, 0.05) 0%, transparent 40%),
        radial-gradient(circle at 80% 70%, rgba(112, 0, 255, 0.05) 0%, transparent 40%);
    color: var(--text);
    overflow-x: hidden;
    min-height: 100vh;
}

/* Контейнер настроек */
.setup-area {
    background: var(--panel);
    backdrop-filter: blur(20px);
    padding: 40px;
    border-radius: 24px;
    max-width: 400px;
    margin: 50px auto;
    border: 1px solid rgba(0, 242, 255, 0.2);
    box-shadow: 0 0 50px rgba(0,0,0,0.8);
    text-align: center;
}

.setup-title {
    font-size: 28px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 30px;
    color: var(--accent);
}

.pair-card {
    background: rgba(255,255,255,0.03);
    padding: 15px;
    border-radius: 12px;
    margin-bottom: 15px;
    border-left: 3px solid var(--accent);
    transition: 0.3s;
}

input {
    background: rgba(0,0,0,0.5);
    border: 1px solid rgba(255,255,255,0.1);
    padding: 12px;
    color: white;
    border-radius: 6px;
    width: 100%;
    margin-top: 8px;
    box-sizing: border-box;
    transition: 0.3s;
}

input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 10px rgba(0, 242, 255, 0.2);
    outline: none;
}

button {
    text-transform: uppercase;
    letter-spacing: 1px;
    font-weight: 700;
    padding: 14px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    transition: 0.3s;
    width: 100%;
    margin-top: 15px;
}

.btn-add { background: transparent; color: var(--accent); border: 1px solid var(--accent); }
.btn-start { background: linear-gradient(45deg, #00f2ff, #7000ff); color: white; }

button:hover { transform: scale(1.02); box-shadow: 0 0 20px rgba(0, 242, 255, 0.4); }

/* Сетка */
.bracket-container {
    display: flex;
    padding: 40px;
    gap: 60px;
    align-items: center;
}

.round {
    display: flex;
    flex-direction: column;
    gap: 40px;
}

.matchup {
    position: relative;
    width: 220px;
    background: rgba(255,255,255,0.05);
    border-radius: 4px;
    border: 1px solid rgba(255,255,255,0.1);
    transition: 0.3s;
}

/* Линии соединения */
.matchup::after {
    content: '';
    position: absolute;
    right: -60px;
    top: 50%;
    width: 60px;
    height: 2px;
    background: rgba(255,255,255,0.1);
    z-index: -1;
}

.round:last-child .matchup::after { display: none; }

.team {
    padding: 12px 15px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    transition: 0.2s;
    font-size: 14px;
    letter-spacing: 1px;
}

.team:hover { background: rgba(0, 242, 255, 0.1); color: var(--accent); }

.team.winner-selected {
    background: var(--win) !important;
    color: #000;
    font-weight: 700;
}

.champion-box {
    text-align: center;
    padding: 20px;
    background: linear-gradient(to bottom, gold, transparent);
    border-radius: 10px;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { opacity: 0.8; }
    50% { opacity: 1; transform: scale(1.05); }
    100% { opacity: 0.8; }
}

/* Мобилка */
@media (max-width: 768px) {
    .bracket-container { flex-direction: column; align-items: center; }
    .matchup::after { display: none; }
}
</style>
</head>
<body>

<div class="setup-area" id="setup">
    <div class="setup-title">Arena Entry</div>
    <div id="inputs-container"></div>
    <button class="btn-add" onclick="addPairField()">+ Add Battle</button>
    <button class="btn-start" onclick="startTournament()">Start Tournament</button>
</div>

<div class="bracket-container" id="bracket"></div>



<script>
let pairCount = 0;

function addPairField() {
    pairCount++;
    const container = document.getElementById('inputs-container');
    const div = document.createElement('div');
    div.className = "pair-card";
    div.style.animation = "fadeIn 0.5s ease backwards " + (pairCount * 0.1) + "s";
    div.innerHTML = `
        <div style="font-size: 10px; margin-bottom: 5px;">MATCH #${pairCount}</div>
        <input type="text" placeholder="Team Alpha" class="t1">
        <input type="text" placeholder="Team Beta" class="t2">
    `;
    container.appendChild(div);
}

function startTournament() {
    const t1Inputs = document.querySelectorAll('.t1');
    const t2Inputs = document.querySelectorAll('.t2');
    const matches = [];

    t1Inputs.forEach((input, i) => {
        if(input.value || t2Inputs[i].value) {
            matches.push([input.value || 'TBD', t2Inputs[i].value || 'TBD']);
        }
    });

    if (matches.length < 2) { alert("Add at least 2 pairs!"); return; }

    document.getElementById('setup').style.opacity = '0';
    setTimeout(() => {
        document.getElementById('setup').style.display = 'none';
        renderRound(1, matches, true);
    }, 500);
}

function renderRound(roundNum, matches, isManual) {
    const bracket = document.getElementById('bracket');
    const roundDiv = document.createElement('div');
    roundDiv.className = 'round';
    roundDiv.id = `round-${roundNum}`;
    roundDiv.innerHTML = `<div style="text-align:center; color:var(--accent); font-size:12px; margin-bottom:10px">PHASE ${roundNum}</div>`;

    matches.forEach(pair => {
        const matchDiv = document.createElement('div');
        matchDiv.className = 'matchup';
        matchDiv.style.animation = "slideIn 0.5s ease forwards";
        matchDiv.innerHTML = `
            <div class="team" onclick="pickWinner(this, ${roundNum})">${pair[0]}</div>
            <div class="team" onclick="pickWinner(this, ${roundNum})">${pair[1]}</div>
        `;
        roundDiv.appendChild(matchDiv);
    });
    bracket.appendChild(roundDiv);
}

function pickWinner(element, roundNum) {
    const matchDiv = element.parentElement;
    if (matchDiv.querySelector('.winner-selected')) return;

    element.classList.add('winner-selected');
    const winnerName = element.innerText;

    // Проверка на финал
    const roundDiv = document.getElementById(`round-${roundNum}`);
    const totalMatchups = roundDiv.querySelectorAll('.matchup').length;
    
    if (totalMatchups === 1 && roundNum > 1) {
        showChampion(winnerName);
        return;
    }

    advance(winnerName, roundNum + 1);
}

function advance(name, nextRoundNum) {
    let nextRound = document.getElementById(`round-${nextRoundNum}`);
    if (!nextRound) {
        renderRound(nextRoundNum, [], false);
        nextRound = document.getElementById(`round-${nextRoundNum}`);
    }

    let lastMatch = nextRound.querySelector('.matchup:last-child');
    if (lastMatch && lastMatch.querySelectorAll('.team').length < 2) {
        const teamDiv = document.createElement('div');
        teamDiv.className = 'team';
        teamDiv.innerText = name;
        teamDiv.onclick = function() { pickWinner(this, nextRoundNum); };
        lastMatch.appendChild(teamDiv);
    } else {
        const newMatch = document.createElement('div');
        newMatch.className = 'matchup';
        newMatch.innerHTML = `<div class="team" onclick="pickWinner(this, ${nextRoundNum})">${name}</div>`;
        nextRound.appendChild(newMatch);
    }
}

function showChampion(name) {
    const bracket = document.getElementById('bracket');
    const champDiv = document.createElement('div');
    champDiv.className = 'champion-box';
    champDiv.innerHTML = `<div style="color:gold; font-size:14px">ULTIMATE CHAMPION</div><div style="font-size:32px">${name}</div>`;
    bracket.appendChild(champDiv);
}

// Start with 2 pairs
addPairField();
addPairField();
</script>

</body>
</html>
